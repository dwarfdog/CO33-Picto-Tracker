<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Clair Obscur — Picto Tracker</title>
		<meta name="description" content="Track your Picto collection in Clair Obscur: Expedition 33. Bilingual FR/EN tracker with export/import.">
		<meta name="theme-color" content="#c9a84c">
		<meta property="og:title" content="CO33 Picto Tracker">
		<meta property="og:description" content="Track your Picto collection in Clair Obscur: Expedition 33">
		<meta property="og:type" content="website">
		<link rel="stylesheet" href="style.css">
		<script>if(location.protocol!=='file:'){var l=document.createElement('link');l.rel='manifest';l.href='manifest.json';document.head.appendChild(l);}</script>
		<link rel="shortcut icon" href="docs/images/fluidicon.png" type="image/x-icon">
		<link rel="apple-touch-icon" href="docs/images/fluidicon.png">
	</head>
	<body>

		<!-- ══════════════════════════════════════════════════════
		HEADER COMPACT
		══════════════════════════════════════════════════════ -->
		<header class="header-compact">
			<div class="header-titre">
				<svg class="header-star" viewbox="0 0 32 32" aria-hidden="true"><path d="M16 2 L18 12 L28 8 L22 16 L30 20 L20 20 L18 30 L16 22 L14 30 L12 20 L2 20 L10 16 L4 8 L14 12 Z"/></svg>
				<h1><span></span></h1>
			</div>
			<div class="header-actions">
				<label for="profil-select" class="sr-only" id="lbl-profil-select">Progress profile</label>
				<select class="select-zone header-profil-select" id="profil-select" aria-labelledby="lbl-profil-select"></select>
				<button type="button" class="btn-action header-btn" id="btn-profil-add" title=""></button>
				<div class="lang-switcher" id="lang-switcher"></div>
				<div class="settings-wrapper">
					<button type="button" class="btn-action header-btn settings-toggle" id="btn-settings" aria-label="Settings" aria-expanded="false">&#9881;</button>
					<div class="settings-popover" id="settings-popover">
						<div class="settings-group">
							<label for="ng-cycle-select" class="settings-label" id="lbl-ng-cycle">NG Cycle</label>
							<select class="select-zone" id="ng-cycle-select" aria-labelledby="lbl-ng-cycle">
								<option value="0">NG</option>
								<option value="1">NG+</option>
								<option value="2">NG++</option>
								<option value="3">NG+++</option>
							</select>
						</div>
						<div class="settings-separator"></div>
						<button type="button" class="btn-action settings-action" id="btn-export"></button>
						<button type="button" class="btn-action settings-action" id="btn-import"></button>
						<input type="file" id="import-fichier" accept=".json,.txt" style="display:none">
						<button type="button" class="btn-action settings-action" id="btn-export-all-shortcut"></button>
						<div class="settings-separator"></div>
						<button type="button" class="btn-action settings-action settings-danger" id="btn-reset"></button>
					</div>
				</div>
			</div>
		</header>

		<main>

		<!-- ══════════════════════════════════════════════════════
		PROGRESSION (compact)
		══════════════════════════════════════════════════════ -->
		<div class="progression-wrapper">
			<div class="progression-header">
				<span class="progression-label"></span>
				<span class="progression-chiffres">
					<span id="nb-possedes">0</span>
					<small>
						/
						<span id="nb-total">0</span>
					</small>
				</span>
			</div>
			<div class="barre-conteneur">
				<div class="barre-remplie" id="barre-prog" style="width:0%"></div>
			</div>
			<div class="progression-pourcent" id="prog-pct"></div>
		</div>

		<!-- ══════════════════════════════════════════════════════
		TOOLBAR
		══════════════════════════════════════════════════════ -->
		<div class="toolbar">
			<div class="toolbar-ligne-1">
				<!-- Recherche -->
				<div class="champ-recherche">
					<svg viewbox="0 0 24 24" aria-hidden="true"><path d="M21 21l-4.35-4.35M17 11A6 6 0 1 1 5 11a6 6 0 0 1 12 0z" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
					<label for="recherche" class="sr-only" id="lbl-recherche">Search</label>
					<input type="text" id="recherche" placeholder="" autocomplete="off" spellcheck="false">
				</div>

				<!-- Zone -->
				<label for="filtre-zone" class="sr-only" id="lbl-filtre-zone">Zone filter</label>
				<select class="select-zone" id="filtre-zone">
					<option value=""></option>
				</select>

				<!-- Catégorie -->
				<label for="filtre-categorie" class="sr-only" id="lbl-filtre-categorie">Category filter</label>
				<select class="select-zone" id="filtre-categorie">
					<option value=""></option>
				</select>

				<!-- Tri -->
				<label for="tri-select" class="sr-only" id="lbl-tri-select">Sort order</label>
				<select class="select-zone" id="tri-select">
					<option value="id-asc"></option>
					<option value="id-desc"></option>
					<option value="nom-asc"></option>
					<option value="nom-desc"></option>
					<option value="zone-asc"></option>
					<option value="zone-desc"></option>
					<option value="possedes-first"></option>
					<option value="manquants-first"></option>
					<option value="build-first"></option>
					<option value="lumina-asc"></option>
					<option value="lumina-desc"></option>
					<option value="categorie-asc"></option>
					<option value="categorie-desc"></option>
				</select>
			</div>

			<div class="toolbar-ligne-2">
				<!-- Filtres collection -->
				<div class="filtre-groupe">
					<span class="filtre-label"></span>
					<button type="button" class="btn-filtre actif" data-filtre="tous"></button>
					<button type="button" class="btn-filtre" data-filtre="possedes"></button>
					<button type="button" class="btn-filtre" data-filtre="manquants"></button>
				</div>

				<!-- Compteurs inline -->
				<div class="compteurs-inline">
					<span class="compteur-badge possede"><span class="cpt-label"></span><strong id="cpt-possedes">0</strong></span>
					<span class="compteur-badge manquant"><span class="cpt-label"></span><strong id="cpt-manquants">0</strong></span>
					<span class="compteur-badge resultats"><span class="cpt-label"></span><strong id="cpt-affiches">0</strong></span>
				</div>
			</div>
		</div>

		<!-- ══════════════════════════════════════════════════════
		TAB BAR
		══════════════════════════════════════════════════════ -->
		<nav class="tab-bar" id="tab-bar" role="tablist">
			<button class="tab-btn actif" data-tab="collection" role="tab" aria-selected="true">
				<span class="tab-icone">&#128203;</span><span class="tab-label"></span>
			</button>
			<button class="tab-btn" data-tab="lumina" role="tab" aria-selected="false">
				<span class="tab-icone">&#9876;</span><span class="tab-label"></span>
			</button>
			<button class="tab-btn" data-tab="builds" role="tab" aria-selected="false">
				<span class="tab-icone">&#128100;</span><span class="tab-label"></span>
			</button>
			<button class="tab-btn" data-tab="filtres" role="tab" aria-selected="false">
				<span class="tab-icone">&#128269;</span><span class="tab-label"></span>
			</button>
			<button class="tab-btn" data-tab="infos" role="tab" aria-selected="false">
				<span class="tab-icone">&#8505;</span><span class="tab-label"></span>
			</button>
		</nav>

		<!-- ══════════════════════════════════════════════════════
		TAB PANELS
		══════════════════════════════════════════════════════ -->
		<div class="tab-panels">
			<!-- Lumina Planner -->
			<section class="tab-panel" id="tab-panel-lumina" role="tabpanel" style="display:none">
				<section class="lumina-planner" id="lumina-planner">
					<div class="lumina-planner-entete">
						<div class="lumina-planner-titre" id="lumina-planner-title"></div>
						<div class="lumina-planner-actions">
							<label for="lumina-budget" class="sr-only" id="lbl-lumina-budget">Lumina budget</label>
							<input type="number" id="lumina-budget" class="lumina-budget-input" min="0" step="1" inputmode="numeric" value="0">
							<button type="button" class="btn-action" id="btn-lumina-clear"></button>
						</div>
					</div>
					<div class="lumina-planner-stats">
						<span class="lumina-chip" id="lumina-selected-count"></span>
						<span class="lumina-chip" id="lumina-total-cost"></span>
						<span class="lumina-chip" id="lumina-remaining"></span>
					</div>
					<div class="lumina-planner-filtres">
						<span class="filtre-label" id="lumina-filter-label"></span>
						<button type="button" class="btn-filtre btn-filtre-build actif" data-build-filtre="tous"></button>
						<button type="button" class="btn-filtre btn-filtre-build" data-build-filtre="planifies"></button>
						<button type="button" class="btn-filtre btn-filtre-build" data-build-filtre="hors-plan"></button>
					</div>
				</section>
			</section>

			<!-- Character Builds -->
			<section class="tab-panel" id="tab-panel-builds" role="tabpanel" style="display:none">
				<section class="character-builds" id="character-builds">
					<div class="character-builds-titre" id="character-builds-title"></div>
					<div class="character-selector" id="character-selector"></div>
					<div class="character-build-detail" id="character-build-detail"></div>
				</section>
			</section>

			<!-- Filtres avancés -->
			<section class="tab-panel" id="tab-panel-filtres" role="tabpanel" style="display:none">
				<!-- Obtention type filter (déplacé de la toolbar) -->
				<div class="filtres-extra-row">
					<label for="filtre-obtention" class="sr-only" id="lbl-filtre-obtention">Obtain filter</label>
					<select class="select-zone" id="filtre-obtention">
						<option value=""></option>
					</select>
				</div>

				<!-- Gameplay filters -->
				<section class="gameplay-filters" id="gameplay-filters">
					<div class="gameplay-filters-head">
						<div class="gameplay-filters-title" id="gameplay-filters-title"></div>
						<div class="gameplay-filters-hint" id="gameplay-filters-hint"></div>
					</div>
					<div class="gameplay-filters-actions">
						<label for="filtre-gameplay-mode" class="sr-only" id="lbl-gameplay-mode">Gameplay filter mode</label>
						<select class="select-zone gameplay-mode-select" id="filtre-gameplay-mode" aria-labelledby="lbl-gameplay-mode">
							<option value="any"></option>
							<option value="all"></option>
						</select>
						<button type="button" class="btn-action" id="btn-gameplay-clear"></button>
						<span class="gameplay-tag-summary" id="gameplay-tag-summary"></span>
					</div>
					<div class="gameplay-tag-buttons" id="gameplay-tag-buttons"></div>
				</section>

				<!-- Farm route -->
				<section class="farm-route" id="farm-route">
					<div class="farm-route-head">
						<div class="farm-route-title" id="farm-route-title"></div>
						<div class="farm-route-meta" id="farm-route-meta"></div>
					</div>
					<div class="farm-route-subtitle" id="farm-route-subtitle"></div>
					<div class="farm-route-empty" id="farm-route-empty"></div>
					<div class="farm-route-groups" id="farm-route-groups"></div>
				</section>
			</section>

			<!-- Infos -->
			<section class="tab-panel" id="tab-panel-infos" role="tabpanel" style="display:none">
				<!-- Dataset changes -->
				<section class="dataset-changes" id="dataset-changes">
					<div class="dataset-changes-head">
						<div class="dataset-changes-title" id="dataset-changes-title"></div>
						<div class="dataset-changes-meta" id="dataset-changes-meta"></div>
					</div>
					<div class="dataset-changes-note" id="dataset-changes-note"></div>
					<div class="dataset-changes-columns">
						<div class="dataset-changes-block">
							<div class="dataset-changes-block-title" id="dataset-changes-added-title"></div>
							<ul class="dataset-changes-list" id="dataset-changes-added-list"></ul>
						</div>
						<div class="dataset-changes-block">
							<div class="dataset-changes-block-title" id="dataset-changes-updated-title"></div>
							<ul class="dataset-changes-list" id="dataset-changes-updated-list"></ul>
						</div>
						<div class="dataset-changes-block">
							<div class="dataset-changes-block-title" id="dataset-changes-removed-title"></div>
							<ul class="dataset-changes-list" id="dataset-changes-removed-list"></ul>
						</div>
					</div>
				</section>

				<!-- Légende interactions -->
				<div class="legende-interactions">
					<div class="legende-item">
						<span class="legende-touche"></span>
						<span class="legende-texte"></span>
					</div>
					<div class="legende-item">
						<span class="legende-icone check">
							<svg viewbox="0 0 24 24" aria-hidden="true"><path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
						</span>
						<span class="legende-texte"></span>
					</div>
					<div class="legende-item">
						<span class="legende-touche"></span>
						<span class="legende-texte"></span>
					</div>
				</div>
			</section>
		</div>

		<!-- ══════════════════════════════════════════════════════
		GRILLE
		══════════════════════════════════════════════════════ -->
		<div class="grille-conteneur" id="grille-conteneur">
			<div class="grille" id="grille"></div>
			<div class="etat-vide" id="etat-vide">
				<svg viewbox="0 0 24 24" aria-hidden="true"><path d="M9.172 16.172a4 4 0 0 1 5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round"/></svg>
				<p></p>
			</div>
		</div>

		</main>

		<!-- ══════════════════════════════════════════════════════
		TOOLTIP / MODAL
		══════════════════════════════════════════════════════ -->
		<div class="tooltip-overlay" id="tooltip-overlay" role="dialog" aria-modal="true" aria-labelledby="tt-nom-fr" aria-describedby="tt-effet">
			<div class="tooltip-panneau" id="tooltip-panneau" role="document">
				<button type="button" class="tooltip-fermer" id="tooltip-fermer" aria-label="">&#215;</button>
				<div class="tooltip-entete">
					<div class="tooltip-entete-meta" id="tt-entete-meta">
						<span class="tooltip-meta-id" id="tt-meta-id"></span>
						<span class="tooltip-meta-cat" id="tt-meta-cat"></span>
						<span class="tooltip-meta-lumina" id="tt-meta-lumina"></span>
					</div>
					<div class="tooltip-nom-fr" id="tt-nom-fr"></div>
					<div class="tooltip-nom-en" id="tt-nom-en"></div>
				</div>
				<div class="tooltip-corps">
					<!-- Groupe Core -->
					<div class="tooltip-group" id="tt-group-core">
						<div class="tooltip-section" id="tt-sec-effet">
							<div class="tooltip-section-titre"></div>
							<div class="tooltip-section-contenu or" id="tt-effet"></div>
						</div>
						<div class="tooltip-section" id="tt-sec-stats">
							<div class="tooltip-section-titre"></div>
							<div class="tooltip-stats-grille" id="tt-stats"></div>
						</div>
					</div>
					<!-- Groupe Localisation -->
					<div class="tooltip-group" id="tt-group-location">
						<div class="tooltip-group-titre" id="tt-group-location-title"></div>
						<div class="tooltip-row-2col" id="tt-row-zone-flag">
							<div class="tooltip-section" id="tt-sec-zone">
								<div class="tooltip-section-titre"></div>
								<div class="tooltip-section-contenu" id="tt-zone"></div>
							</div>
							<div class="tooltip-section" id="tt-sec-flag">
								<div class="tooltip-section-titre"></div>
								<div class="tooltip-section-contenu flag" id="tt-flag"></div>
							</div>
						</div>
						<div class="tooltip-section" id="tt-sec-obtention">
							<div class="tooltip-section-titre"></div>
							<div class="tooltip-section-contenu italique" id="tt-obtention"></div>
						</div>
						<div class="tooltip-section" id="tt-sec-source">
							<div class="tooltip-section-titre"></div>
							<div class="tooltip-section-contenu" id="tt-source"></div>
						</div>
					</div>
					<!-- Groupe Classification -->
					<div class="tooltip-group" id="tt-group-classification">
						<div class="tooltip-group-titre" id="tt-group-classification-title"></div>
						<div class="tooltip-row-2col" id="tt-row-cat-obt">
							<div class="tooltip-section" id="tt-sec-categorie">
								<div class="tooltip-section-titre"></div>
								<div class="tooltip-section-contenu" id="tt-categorie"></div>
							</div>
							<div class="tooltip-section" id="tt-sec-obtention-type">
								<div class="tooltip-section-titre"></div>
								<div class="tooltip-section-contenu" id="tt-obtention-type"></div>
							</div>
						</div>
						<div class="tooltip-section" id="tt-sec-char-affinity">
							<div class="tooltip-section-titre"></div>
							<div class="tooltip-char-affinities" id="tt-char-affinities"></div>
						</div>
					</div>
					<!-- Groupe Suivi -->
					<div class="tooltip-group" id="tt-group-tracking">
						<div class="tooltip-group-titre" id="tt-group-tracking-title"></div>
						<div class="tooltip-row-2col" id="tt-row-mastery-level">
							<div class="tooltip-section" id="tt-sec-mastery">
								<div class="tooltip-section-titre"></div>
								<div class="tooltip-mastery-controls" id="tt-mastery-controls"></div>
							</div>
							<div class="tooltip-section" id="tt-sec-level">
								<div class="tooltip-section-titre"></div>
								<div class="tooltip-level-controls" id="tt-level-controls"></div>
							</div>
						</div>
						<button type="button" class="tooltip-btn-possession" id="tt-btn-possession"></button>
					</div>
				</div>
			</div>
		</div>

		<!-- ══════════════════════════════════════════════════════
		MODAL IMPORT
		══════════════════════════════════════════════════════ -->
		<div class="import-overlay" id="import-overlay" role="dialog" aria-modal="true" aria-labelledby="import-title" aria-describedby="import-description">
			<div class="import-panneau" role="document">
				<div class="import-titre" id="import-title"></div>
				<div class="import-description" id="import-description"></div>
				<textarea class="import-textarea" id="import-textarea" placeholder="" spellcheck="false"></textarea>
				<div class="import-actions">
					<button type="button" class="btn-import-valider" id="btn-import-valider"></button>
					<button type="button" class="btn-import-fichier" id="btn-import-fichier"></button>
					<button type="button" class="btn-import-annuler" id="btn-import-annuler"></button>
				</div>
			</div>
		</div>

		<!-- ══════════════════════════════════════════════════════
		MODAL EXPORT
		══════════════════════════════════════════════════════ -->
		<div class="export-overlay" id="export-overlay" role="dialog" aria-modal="true" aria-labelledby="export-title" aria-describedby="export-description">
			<div class="export-panneau" role="document">
				<div class="export-titre" id="export-title"></div>
				<div class="export-description" id="export-description"></div>
				<textarea class="export-textarea" id="export-textarea" readonly spellcheck="false"></textarea>
				<div class="export-actions">
					<button type="button" class="btn-export-copier" id="btn-export-copier"></button>
					<button type="button" class="btn-export-fichier" id="btn-export-fichier"></button>
					<button type="button" class="btn-export-all" id="btn-export-all"></button>
					<button type="button" class="btn-export-fermer" id="btn-export-fermer"></button>
				</div>
			</div>
		</div>

		<!-- ══════════════════════════════════════════════════════
		MODAL PROMPT (remplace prompt() natif)
		══════════════════════════════════════════════════════ -->
		<div class="prompt-overlay" id="prompt-overlay" role="dialog" aria-modal="true" aria-labelledby="prompt-title">
			<div class="prompt-panneau" role="document">
				<div class="prompt-titre" id="prompt-title"></div>
				<input type="text" class="prompt-input" id="prompt-input" autocomplete="off" spellcheck="false">
				<div class="prompt-actions">
					<button type="button" class="btn-prompt-ok" id="btn-prompt-ok"></button>
					<button type="button" class="btn-prompt-cancel" id="btn-prompt-cancel"></button>
				</div>
			</div>
		</div>

		<!-- ══════════════════════════════════════════════════════
		MODAL CONFIRM (remplace confirm() natif)
		══════════════════════════════════════════════════════ -->
		<div class="confirm-overlay" id="confirm-overlay" role="alertdialog" aria-modal="true" aria-labelledby="confirm-message">
			<div class="confirm-panneau" role="document">
				<div class="confirm-message" id="confirm-message"></div>
				<div class="confirm-actions">
					<button type="button" class="btn-confirm-yes" id="btn-confirm-yes"></button>
					<button type="button" class="btn-confirm-no" id="btn-confirm-no"></button>
				</div>
			</div>
		</div>

		<!-- Toast -->
		<div class="toast" id="toast" role="status" aria-live="polite"></div>

		<!-- ══════════════════════════════════════════════════════
		FOOTER
		══════════════════════════════════════════════════════ -->
		<footer>
			<span id="ft-data"></span> — <span id="ft-studio"></span> &middot; <span id="ft-save"></span><br>
			<span id="ft-dataset"></span><br>
			<span id="ft-license"></span>
		</footer>

		<!-- ══ Namespace ══ -->
		<script src="js/app.js"></script>

		<!-- ══ Data ══ -->
		<script src="js/datas/skills-data.js"></script>

		<!-- ══ Langues (auto-enregistrement) ══ -->
		<script src="lang/fr.js"></script>
		<script src="lang/en.js"></script>

		<!-- ══ Core ══ -->
		<script src="js/i18n.js"></script>
		<script src="js/state.js"></script>
		<script src="js/utils.js"></script>
		<script src="js/gameplay-expert.js"></script>

		<!-- ══ Features ══ -->
		<script src="js/progress.js"></script>
		<script src="js/tooltip.js"></script>
		<script src="js/filters.js"></script>
		<script src="js/lumina-planner.js"></script>
		<script src="js/character-builds.js"></script>
		<script src="js/dataset-changes.js"></script>
		<script src="js/export-import.js"></script>
		<script src="js/cards.js"></script>
		<script src="js/ui-translate.js"></script>
		<script src="js/events.js"></script>

		<!-- ══ Boot ══ -->
		<script src="js/boot.js"></script>
	</body>
</html>
